<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Touch vs Mouse Interaction Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            padding: 20px;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #16a085 0%, #2ecc71 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .nav {
            background: #2c3e50;
            padding: 15px;
            text-align: center;
        }

        .nav a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            margin: 0 10px;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .nav a:hover {
            background: #34495e;
        }

        .device-detection {
            background: #ecf0f1;
            padding: 15px;
            margin: 20px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }

        .content {
            padding: 30px;
        }

        .demo-section {
            margin-bottom: 40px;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }

        .demo-header {
            background: #ecf0f1;
            padding: 15px 20px;
            border-bottom: 1px solid #ddd;
        }

        .demo-header h3 {
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .demo-header p {
            color: #666;
            font-size: 0.9rem;
        }

        .demo-content {
            padding: 20px;
        }

        /* Hover Effects Demo */
        .hover-demo {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .hover-card {
            background: #3498db;
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .hover-card:hover {
            background: #2980b9;
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        .hover-card.touch-optimized {
            background: #e74c3c;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hover-card.touch-optimized:hover {
            background: #c0392b;
        }

        /* Touch Target Size Demo */
        .touch-targets {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .touch-target {
            background: #9b59b6;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .touch-target:hover {
            background: #8e44ad;
        }

        .touch-target:active {
            background: #732d91;
        }

        .small-target {
            width: 30px;
            height: 30px;
            font-size: 0.8rem;
        }

        .medium-target {
            width: 40px;
            height: 40px;
            font-size: 0.9rem;
        }

        .large-target {
            width: 50px;
            height: 50px;
            font-size: 1rem;
        }

        .recommended-target {
            width: 44px;
            height: 44px;
            font-size: 1rem;
            background: #27ae60;
        }

        .recommended-target:hover {
            background: #2ecc71;
        }

        /* Gesture Demo */
        .gesture-area {
            background: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            cursor: move;
            user-select: none;
        }

        .gesture-area.active {
            border-color: #007bff;
            background: #e3f2fd;
        }

        /* Draggable Demo */
        .draggable-container {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            min-height: 300px;
            position: relative;
            overflow: hidden;
        }

        .draggable-item {
            background: #007bff;
            color: white;
            padding: 15px;
            border-radius: 8px;
            position: absolute;
            cursor: move;
            user-select: none;
            touch-action: none;
            width: 100px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .draggable-item:hover {
            background: #0056b3;
        }

        .draggable-item.dragging {
            opacity: 0.7;
            transform: scale(1.05);
        }

        /* Long Press Demo */
        .long-press-item {
            background: #17a2b8;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            user-select: none;
        }

        .long-press-item:hover {
            background: #138496;
        }

        .long-press-item.pressing {
            background: #0e6674;
            transform: scale(0.95);
        }

        .long-press-item.activated {
            background: #28a745;
            animation: pulse 0.5s;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Context Menu Demo */
        .context-menu-area {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 40px;
            margin: 20px 0;
            text-align: center;
            cursor: pointer;
            position: relative;
        }

        .context-menu {
            position: absolute;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            padding: 10px 0;
            display: none;
            z-index: 1000;
        }

        .context-menu-item {
            padding: 10px 20px;
            cursor: pointer;
        }

        .context-menu-item:hover {
            background: #f8f9fa;
        }

        /* Input Focus Demo */
        .input-demo {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            margin-bottom: 5px;
            font-weight: bold;
        }

        .input-group input, .input-group textarea {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px; /* Prevents zoom on iOS */
        }

        .input-group input:focus, .input-group textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }

        /* Touch-specific styles */
        @media (hover: none) and (pointer: coarse) {
            .hover-card {
                background: #e74c3c !important;
            }
            
            .hover-card:hover {
                background: #c0392b !important;
                transform: none !important;
                box-shadow: none !important;
            }
            
            .touch-target {
                min-width: 44px;
                min-height: 44px;
            }
            
            .nav a {
                padding: 15px 25px;
            }
        }

        .code-example {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 15px 0;
        }

        .interaction-log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
        }

        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Touch vs Mouse Interaction Demo</h1>
            <p>Exploring how user interactions differ between touch and mouse devices</p>
        </div>

        <div class="nav">
            <a href="index.html">← Back to Home</a>
            <a href="#hover">Hover Effects</a>
            <a href="#touch-targets">Touch Targets</a>
            <a href="#gestures">Gestures</a>
            <a href="#input">Input Methods</a>
        </div>

        <div class="device-detection" id="deviceDetection">
            Detecting your input method...
        </div>

        <div class="content">
            <div class="demo-section" id="hover">
                <div class="demo-header">
                    <h3>Hover Effects</h3>
                    <p>Hover effects work great on mouse devices but need alternatives on touch devices</p>
                </div>
                <div class="demo-content">
                    <div class="hover-demo">
                        <div class="hover-card">
                            <h4>Mouse-Optimized</h4>
                            <p>Hover to see effect</p>
                        </div>
                        <div class="hover-card touch-optimized">
                            <h4>Touch-Optimized</h4>
                            <p>Tap to interact</p>
                        </div>
                    </div>

                    <div class="warning">
                        <strong>⚠️ Touch Device Issue:</strong>
                        On touch devices, hover effects don't work intuitively. Users must tap to trigger hover states, which can be confusing.
                    </div>

                    <div class="code-example">/* CSS for Touch-Friendly Design */
/* Default styles */
.button {
    background: #007bff;
    transition: background 0.3s;
}

/* Hover only for devices that can hover */
@media (hover: hover) {
    .button:hover {
        background: #0056b3;
    }
}

/* Touch-specific styles */
@media (hover: none) and (pointer: coarse) {
    .button {
        /* Larger touch targets */
        min-height: 44px;
        min-width: 44px;
    }
    
    .button:active {
        background: #0056b3;
    }
}</div>
                </div>
            </div>

            <div class="demo-section" id="touch-targets">
                <div class="demo-header">
                    <h3>Touch Target Sizes</h3>
                    <p>Comparing different button sizes for touch accessibility</p>
                </div>
                <div class="demo-content">
                    <h4>Try tapping these buttons (especially on mobile):</h4>
                    <div class="touch-targets">
                        <button class="touch-target small-target" onclick="logInteraction('Small button (30px) clicked')">30px</button>
                        <button class="touch-target medium-target" onclick="logInteraction('Medium button (40px) clicked')">40px</button>
                        <button class="touch-target large-target" onclick="logInteraction('Large button (50px) clicked')">50px</button>
                        <button class="touch-target recommended-target" onclick="logInteraction('Recommended button (44px) clicked')">44px ✓</button>
                    </div>

                    <div class="warning">
                        <strong>💡 Apple's Human Interface Guidelines:</strong>
                        Recommend minimum 44x44 points for touch targets. Android recommends 48dp (density-independent pixels).
                    </div>

                    <div class="code-example">/* Touch Target Size Guidelines */
.touch-target {
    min-width: 44px;  /* Apple HIG recommendation */
    min-height: 44px;
    padding: 12px 16px;
    
    /* Ensure adequate spacing between targets */
    margin: 8px;
}

/* For very small screens */
@media (max-width: 320px) {
    .touch-target {
        min-width: 40px;
        min-height: 40px;
    }
}</div>

                    <div class="interaction-log" id="interactionLog">Interaction log will appear here...</div>
                </div>
            </div>

            <div class="demo-section" id="gestures">
                <div class="demo-header">
                    <h3>Touch Gestures vs Mouse Actions</h3>
                    <p>Different interaction patterns for touch and mouse devices</p>
                </div>
                <div class="demo-content">
                    <h4>Gesture Area (try different interactions):</h4>
                    <div class="gesture-area" id="gestureArea">
                        <strong>Touch:</strong> Tap, Long Press, Swipe<br>
                        <strong>Mouse:</strong> Click, Right-click, Drag<br>
                        <em>Interactions will be logged below</em>
                    </div>

                    <h4>Draggable Elements:</h4>
                    <div class="draggable-container" id="dragContainer">
                        <div class="draggable-item" id="draggable1" style="top: 20px; left: 20px;">Drag 1</div>
                        <div class="draggable-item" id="draggable2" style="top: 100px; left: 120px;">Drag 2</div>
                    </div>

                    <h4>Long Press Demo:</h4>
                    <div class="long-press-item" id="longPressItem">
                        Hold me down (mouse) or long press (touch)
                    </div>

                    <div class="code-example">/* Touch Event Handling */
element.addEventListener('touchstart', handleTouchStart, {passive: false});
element.addEventListener('touchmove', handleTouchMove, {passive: false});
element.addEventListener('touchend', handleTouchEnd);

/* Mouse Event Handling */
element.addEventListener('mousedown', handleMouseDown);
element.addEventListener('mousemove', handleMouseMove);
element.addEventListener('mouseup', handleMouseUp);

/* Unified Pointer Events (Modern Approach) */
element.addEventListener('pointerdown', handlePointerDown);
element.addEventListener('pointermove', handlePointerMove);
element.addEventListener('pointerup', handlePointerUp);</div>

                    <div class="interaction-log" id="gestureLog">Gesture log will appear here...</div>
                </div>
            </div>

            <div class="demo-section">
                <div class="demo-header">
                    <h3>Context Menus</h3>
                    <p>Right-click context menus vs touch alternatives</p>
                </div>
                <div class="demo-content">
                    <div class="context-menu-area" id="contextArea">
                        <strong>Desktop:</strong> Right-click for context menu<br>
                        <strong>Touch:</strong> Long press for context menu<br>
                        <div class="context-menu" id="contextMenu">
                            <div class="context-menu-item" onclick="logInteraction('Copy selected')">Copy</div>
                            <div class="context-menu-item" onclick="logInteraction('Paste selected')">Paste</div>
                            <div class="context-menu-item" onclick="logInteraction('Delete selected')">Delete</div>
                        </div>
                    </div>

                    <div class="code-example">/* Context Menu Implementation */
function showContextMenu(e, x, y) {
    e.preventDefault();
    const menu = document.getElementById('contextMenu');
    menu.style.display = 'block';
    menu.style.left = x + 'px';
    menu.style.top = y + 'px';
}

// Mouse right-click
element.addEventListener('contextmenu', (e) => {
    showContextMenu(e, e.clientX, e.clientY);
});

// Touch long press
let longPressTimer;
element.addEventListener('touchstart', (e) => {
    longPressTimer = setTimeout(() => {
        const touch = e.touches[0];
        showContextMenu(e, touch.clientX, touch.clientY);
    }, 500);
});

element.addEventListener('touchend', () => {
    clearTimeout(longPressTimer);
});</div>
                </div>
            </div>

            <div class="demo-section" id="input">
                <div class="demo-header">
                    <h3>Input Methods</h3>
                    <p>How input behavior differs between devices</p>
                </div>
                <div class="demo-content">
                    <div class="input-demo">
                        <div class="input-group">
                            <label for="textInput">Text Input:</label>
                            <input type="text" id="textInput" placeholder="Type here..." onfocus="logInteraction('Text input focused')">
                        </div>
                        <div class="input-group">
                            <label for="numberInput">Number Input:</label>
                            <input type="number" id="numberInput" placeholder="123..." onfocus="logInteraction('Number input focused')">
                        </div>
                        <div class="input-group">
                            <label for="emailInput">Email Input:</label>
                            <input type="email" id="emailInput" placeholder="email@example.com" onfocus="logInteraction('Email input focused')">
                        </div>
                        <div class="input-group">
                            <label for="textArea">Text Area:</label>
                            <textarea id="textArea" placeholder="Longer text..." onfocus="logInteraction('Textarea focused')"></textarea>
                        </div>
                    </div>

                    <div class="warning">
                        <strong>📱 Mobile Considerations:</strong>
                        <ul style="margin-top: 10px; padding-left: 20px;">
                            <li>Use appropriate input types to show correct keyboards</li>
                            <li>Set font-size to 16px+ to prevent zoom on iOS</li>
                            <li>Consider autocomplete, autocorrect, and autocapitalize attributes</li>
                            <li>Use proper viewport meta tag to prevent zoom issues</li>
                        </ul>
                    </div>

                    <div class="code-example">/* Mobile-Friendly Input CSS */
input, textarea {
    font-size: 16px; /* Prevents zoom on iOS */
    padding: 12px;   /* Adequate touch target */
    border-radius: 8px;
    border: 1px solid #ddd;
}

/* Input type attributes for mobile keyboards */
&lt;input type="tel"&gt;     <!-- Phone keyboard -->
&lt;input type="email"&gt;   <!-- Email keyboard -->
&lt;input type="number"&gt;  <!-- Number keyboard -->
&lt;input type="url"&gt;     <!-- URL keyboard -->
&lt;input type="search"&gt;  <!-- Search keyboard -->

/* Input attributes for mobile behavior */
&lt;input autocomplete="name"&gt;
&lt;input autocorrect="off"&gt;
&lt;input autocapitalize="words"&gt;
&lt;input spellcheck="false"&gt;</div>
                </div>
            </div>

            <div class="demo-section">
                <div class="demo-header">
                    <h3>Best Practices Summary</h3>
                    <p>Key principles for cross-device compatibility</p>
                </div>
                <div class="demo-content">
                    <div class="code-example">/* Feature Detection Approach */

/* 1. Detect touch capability */
const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

/* 2. Detect hover capability */
const canHover = window.matchMedia('(hover: hover)').matches;

/* 3. Detect pointer precision */
const hasFinePointer = window.matchMedia('(pointer: fine)').matches;

/* 4. Apply appropriate styles/behavior */
if (hasTouch) {
    document.body.classList.add('touch-device');
}

if (!canHover) {
    document.body.classList.add('no-hover');
}

/* 5. CSS Media Queries */
@media (hover: none) and (pointer: coarse) {
    /* Touch device styles */
}

@media (hover: hover) and (pointer: fine) {
    /* Mouse device styles */
}</div>

                    <div style="background: #e8f5e8; padding: 20px; border-radius: 8px; margin: 20px 0;">
                        <h4 style="color: #27ae60; margin-bottom: 15px;">✅ Do's for Cross-Device Compatibility:</h4>
                        <ul style="padding-left: 20px; line-height: 1.8;">
                            <li>Use minimum 44px touch targets</li>
                            <li>Provide visual feedback for all interactions</li>
                            <li>Use appropriate input types for mobile keyboards</li>
                            <li>Implement both hover and active states</li>
                            <li>Test on real devices, not just browser dev tools</li>
                            <li>Use pointer events for unified input handling</li>
                            <li>Consider accessibility guidelines (WCAG)</li>
                        </ul>
                    </div>

                    <div style="background: #f8d7da; padding: 20px; border-radius: 8px; margin: 20px 0;">
                        <h4 style="color: #dc3545; margin-bottom: 15px;">❌ Don'ts for Cross-Device Compatibility:</h4>
                        <ul style="padding-left: 20px; line-height: 1.8;">
                            <li>Don't rely solely on hover effects for important actions</li>
                            <li>Don't make touch targets smaller than 44px</li>
                            <li>Don't assume users have a mouse or keyboard</li>
                            <li>Don't forget to test on actual touch devices</li>
                            <li>Don't use small fonts (below 16px) on mobile inputs</li>
                            <li>Don't ignore gesture conflicts with native behaviors</li>
                            <li>Don't make interface elements too close together</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let interactionCount = 0;
        let longPressTimer = null;
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };

        // Device detection
        function detectInputMethod() {
            const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            const canHover = window.matchMedia('(hover: hover)').matches;
            const hasFinePointer = window.matchMedia('(pointer: fine)').matches;
            
            let deviceType = '';
            if (hasTouch && !hasFinePointer) {
                deviceType = 'Touch Device (Phone/Tablet)';
            } else if (hasTouch && hasFinePointer) {
                deviceType = 'Hybrid Device (Laptop with Touch)';
            } else {
                deviceType = 'Mouse/Trackpad Device (Desktop/Laptop)';
            }

            const detection = document.getElementById('deviceDetection');
            detection.innerHTML = `
                <strong>Input Method Detection:</strong><br>
                Device Type: ${deviceType}<br>
                Touch Support: ${hasTouch ? '✅' : '❌'}<br>
                Hover Support: ${canHover ? '✅' : '❌'}<br>
                Fine Pointer: ${hasFinePointer ? '✅' : '❌'}
            `;

            // Add classes to body for styling
            if (hasTouch) document.body.classList.add('touch-device');
            if (!canHover) document.body.classList.add('no-hover');
            if (!hasFinePointer) document.body.classList.add('coarse-pointer');
        }

        // Logging function
        function logInteraction(message) {
            interactionCount++;
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${interactionCount}: ${message}`;
            
            // Update main interaction log
            const interactionLog = document.getElementById('interactionLog');
            if (interactionLog) {
                interactionLog.innerHTML = logEntry + '\n' + interactionLog.innerHTML;
            }
            
            // Update gesture log
            const gestureLog = document.getElementById('gestureLog');
            if (gestureLog) {
                gestureLog.innerHTML = logEntry + '\n' + gestureLog.innerHTML;
            }
        }

        // Gesture area event handlers
        function setupGestureArea() {
            const gestureArea = document.getElementById('gestureArea');
            
            // Touch events
            gestureArea.addEventListener('touchstart', (e) => {
                gestureArea.classList.add('active');
                logInteraction('Touch started');
                
                // Long press detection
                longPressTimer = setTimeout(() => {
                    logInteraction('Long press detected (touch)');
                    navigator.vibrate && navigator.vibrate(50); // Haptic feedback
                }, 500);
            });

            gestureArea.addEventListener('touchmove', (e) => {
                clearTimeout(longPressTimer);
                logInteraction('Touch move/swipe detected');
            });

            gestureArea.addEventListener('touchend', (e) => {
                gestureArea.classList.remove('active');
                clearTimeout(longPressTimer);
                logInteraction('Touch ended');
            });

            // Mouse events
            gestureArea.addEventListener('mousedown', (e) => {
                gestureArea.classList.add('active');
                logInteraction('Mouse down');
                
                // Long press detection for mouse
                longPressTimer = setTimeout(() => {
                    logInteraction('Long press detected (mouse)');
                }, 500);
            });

            gestureArea.addEventListener('mouseup', (e) => {
                gestureArea.classList.remove('active');
                clearTimeout(longPressTimer);
                logInteraction('Mouse up');
            });

            gestureArea.addEventListener('mouseleave', (e) => {
                gestureArea.classList.remove('active');
                clearTimeout(longPressTimer);
            });

            // Context menu
            gestureArea.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                showContextMenu(e.clientX, e.clientY);
                logInteraction('Context menu triggered (right-click)');
            });
        }

        // Draggable functionality
        function setupDraggable() {
            const draggables = document.querySelectorAll('.draggable-item');
            
            draggables.forEach(item => {
                // Mouse events
                item.addEventListener('mousedown', (e) => {
                    isDragging = true;
                    item.classList.add('dragging');
                    dragOffset.x = e.clientX - item.offsetLeft;
                    dragOffset.y = e.clientY - item.offsetTop;
                    logInteraction(`Started dragging ${item.textContent} (mouse)`);
                });

                // Touch events
                item.addEventListener('touchstart', (e) => {
                    isDragging = true;
                    item.classList.add('dragging');
                    const touch = e.touches[0];
                    dragOffset.x = touch.clientX - item.offsetLeft;
                    dragOffset.y = touch.clientY - item.offsetTop;
                    logInteraction(`Started dragging ${item.textContent} (touch)`);
                });
            });

            // Global move and end events
            document.addEventListener('mousemove', handleDragMove);
            document.addEventListener('touchmove', handleDragMove);
            document.addEventListener('mouseup', handleDragEnd);
            document.addEventListener('touchend', handleDragEnd);
        }

        function handleDragMove(e) {
            if (!isDragging) return;
            
            const dragging = document.querySelector('.dragging');
            if (!dragging) return;

            e.preventDefault();
            
            let clientX, clientY;
            if (e.type === 'mousemove') {
                clientX = e.clientX;
                clientY = e.clientY;
            } else {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            }

            const container = document.getElementById('dragContainer');
            const containerRect = container.getBoundingClientRect();
            
            let newX = clientX - containerRect.left - dragOffset.x;
            let newY = clientY - containerRect.top - dragOffset.y;
            
            // Boundary checking
            newX = Math.max(0, Math.min(newX, container.offsetWidth - dragging.offsetWidth));
            newY = Math.max(0, Math.min(newY, container.offsetHeight - dragging.offsetHeight));
            
            dragging.style.left = newX + 'px';
            dragging.style.top = newY + 'px';
        }

        function handleDragEnd(e) {
            if (!isDragging) return;
            
            isDragging = false;
            const dragging = document.querySelector('.dragging');
            if (dragging) {
                dragging.classList.remove('dragging');
                logInteraction(`Finished dragging ${dragging.textContent}`);
            }
        }

        // Long press demo
        function setupLongPress() {
            const longPressItem = document.getElementById('longPressItem');
            let pressTimer;

            function startPress() {
                longPressItem.classList.add('pressing');
                pressTimer = setTimeout(() => {
                    longPressItem.classList.remove('pressing');
                    longPressItem.classList.add('activated');
                    logInteraction('Long press action triggered!');
                    setTimeout(() => {
                        longPressItem.classList.remove('activated');
                    }, 1000);
                }, 800);
            }

            function endPress() {
                clearTimeout(pressTimer);
                longPressItem.classList.remove('pressing');
            }

            // Mouse events
            longPressItem.addEventListener('mousedown', startPress);
            longPressItem.addEventListener('mouseup', endPress);
            longPressItem.addEventListener('mouseleave', endPress);

            // Touch events
            longPressItem.addEventListener('touchstart', startPress);
            longPressItem.addEventListener('touchend', endPress);
        }

        // Context menu
        function showContextMenu(x, y) {
            const contextMenu = document.getElementById('contextMenu');
            contextMenu.style.display = 'block';
            contextMenu.style.left = x + 'px';
            contextMenu.style.top = y + 'px';
        }

        function hideContextMenu() {
            const contextMenu = document.getElementById('contextMenu');
            contextMenu.style.display = 'none';
        }

        // Context menu for touch long press
        function setupContextMenu() {
            const contextArea = document.getElementById('contextArea');
            let longPressTimer;

            // Touch long press
            contextArea.addEventListener('touchstart', (e) => {
                longPressTimer = setTimeout(() => {
                    const touch = e.touches[0];
                    showContextMenu(touch.clientX, touch.clientY);
                    logInteraction('Context menu triggered (long press)');
                }, 500);
            });

            contextArea.addEventListener('touchmove', () => {
                clearTimeout(longPressTimer);
            });

            contextArea.addEventListener('touchend', () => {
                clearTimeout(longPressTimer);
            });

            // Hide context menu when clicking elsewhere
            document.addEventListener('click', hideContextMenu);
            document.addEventListener('touchstart', hideContextMenu);
        }

        // Initialize everything
        document.addEventListener('DOMContentLoaded', () => {
            detectInputMethod();
            setupGestureArea();
            setupDraggable();
            setupLongPress();
            setupContextMenu();
            
            logInteraction('Demo initialized - try different interactions!');
        });

        // Handle window resize
        window.addEventListener('resize', () => {
            detectInputMethod();
        });
    </script>
</body>
</html>